{% extends 'index.html' %}
{% load static %}
{% block scripts %}
<script src="{% static 'js/main.js' %}" defer ></script>

 
{% endblock %}


{% block title %}{{ land.name }}{% endblock %}

{% block content %}

<h1>{{ land.name }}</h1>
<div style="border-bottom: 1px solid #ccc; margin: 10px; overflow: auto;">
  <div style="float:right; margin:10px"><img src="{{land.image.url}}" style="height:200px"></div>
  <div style="float:right; text-align:right; padding: 20px">
    <div style="font-size:1.8em;"><a href="{% url "land_detail" land.id %}">{{land.name}}</a></div>
    <div style="padding:10px 0;">{{land.description|truncatechars:100}}</div>
    <div style="font-size:0.8em;">{{land.address}}</div>
    <div style="font-size:0.8em;">{{land.author}}</div>
    <div style="font-size:0.8em;">{{land.date_create}}</div>
  </div>
</div>


{% if land.buildings %}
  {% for building in land.buildings.all %}
  
  <div style="border-bottom: 1px solid #ccc; padding: 10px; overflow: auto;">
    <div style="float:left; margin:10px"><img src="{{building.image.url}}" style="height:200px"></div>
    <div style="float:left; margin:10px">
      <div style="font-size: 1.2em">{{ building.name }}</div>
      <div style="font-size: 0.8em">{{ building.description }}</div>
      {% if building.floor != 1 %}<div>"Этажей: {{ building.floor }}</div>{% endif %}

      {% if building.rooms %}
      {% for room in building.rooms.all %}
        <div style=" padding: 10px 30px; overflow: auto;">
          <div style="font-size: 1.2em">{{ room.name }}</div>
          <div style="font-size: 0.8em">{{ room.description }}</div>
          {% if building.floor != 1 %}<div>Этаж: {{ room.floor }}</div>{% endif %}

            {% if room.equipments %}
            {% for equipment in room.equipments.all %}
              <div style="padding: 10px 30px; overflow: auto;">
                <div style="font-size: 1.2em">{{ equipment.name }}</div>
                <div style="font-size: 0.8em">{{ equipment.description|truncatechars:100}}</div>
                <div style="font-size: 0.8em; padding-left: 40px">Тип: {{ equipment.type }}</div>
                <div style="font-size: 0.8em; padding-left: 40px">Напряжение питания: {{ equipment.voltage }} В.</div>
                <div style="font-size: 0.8em; padding-left: 40px">Потребление тока: {{ equipment.current }} Вт.</div>
                <div style="font-size: 0.8em; padding-left: 40px">Стартовый ток: {{ equipment.start_current }} А.</div>
                <div id="drop-doun-{{equipment.id}}" class="drop-doun" >
                  <span style="strelka-img"><img id="img-strelka-{{equipment.id}}"  src="{% static 'images/strelka_mini.jpg' %}" /></span>
                  Интерфейс управления: 
                  <div id="hidden-box-{{equipment.id}}" class="not-visible" style=" padding-left: 40px">
                    {% if equipment.interface %}
                    {% for interface in equipment.interface.all %}
                    {{ interface.name }}
                    {% if interface.description %}{{ interface.description }}{% endif %}
                    {% if interface.voltage %}{{ interface.voltage }}{% endif %}
                    {% if interface.current %}{{ interface.current }}{% endif %}
                    {% if interface.start_current %}{{ interface.start_current }}{% endif %}
                    {% endfor %}
                    {% endif %}
                  </div>
                </div>
              </div>
            {% endfor %}
            {% endif %}
        </div>
      {% endfor %}
      {% endif %}
    </div>
  </div>
  {% endfor %}
{% endif %}

{% endblock %}

